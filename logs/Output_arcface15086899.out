Running script...
Extraction features from database ........
Found existing installation: mxnet-cu102 1.7.0
Uninstalling mxnet-cu102-1.7.0:
  Successfully uninstalled mxnet-cu102-1.7.0
Requirement already satisfied: torch==1.9.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 1)) (1.9.0)
Requirement already satisfied: tensorboard in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 2)) (2.11.0)
Requirement already satisfied: easydict in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 3)) (1.10)
Collecting mxnet-cu102==1.7
  Using cached mxnet_cu102-1.7.0-py2.py3-none-manylinux2014_x86_64.whl (895.9 MB)
Requirement already satisfied: onnx in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 5)) (1.13.0)
Requirement already satisfied: sklearn in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 6)) (0.0.post1)
Requirement already satisfied: opencv-python in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 7)) (4.6.0.66)
Requirement already satisfied: scikit-image in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 8)) (0.19.3)
Requirement already satisfied: cython in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 9)) (0.29.32)
Requirement already satisfied: matplotlib in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from -r recognition/arcface_torch/requirement.txt (line 10)) (3.5.3)
Requirement already satisfied: typing-extensions in /appl/python/3.7.11/lib/python3.7/site-packages (from torch==1.9.0->-r recognition/arcface_torch/requirement.txt (line 1)) (3.10.0.0)
Requirement already satisfied: requests<3,>=2.20.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (2.28.1)
Requirement already satisfied: graphviz<0.9.0,>=0.8.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (0.8.4)
Requirement already satisfied: numpy<2.0.0,>1.16.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (1.21.6)
Requirement already satisfied: charset-normalizer<3,>=2 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from requests<3,>=2.20.0->mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (2.1.1)
Requirement already satisfied: idna<4,>=2.5 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from requests<3,>=2.20.0->mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (3.4)
Requirement already satisfied: certifi>=2017.4.17 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from requests<3,>=2.20.0->mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (2022.12.7)
Requirement already satisfied: urllib3<1.27,>=1.21.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from requests<3,>=2.20.0->mxnet-cu102==1.7->-r recognition/arcface_torch/requirement.txt (line 4)) (1.26.13)
Requirement already satisfied: tensorboard-plugin-wit>=1.6.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (1.8.1)
Requirement already satisfied: absl-py>=0.4 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (1.3.0)
Requirement already satisfied: tensorboard-data-server<0.7.0,>=0.6.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (0.6.1)
Requirement already satisfied: google-auth-oauthlib<0.5,>=0.4.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (0.4.6)
Requirement already satisfied: protobuf<4,>=3.9.2 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (3.20.3)
Requirement already satisfied: setuptools>=41.0.0 in /appl/python/3.7.11/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (57.4.0)
Requirement already satisfied: werkzeug>=1.0.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (2.2.2)
Requirement already satisfied: wheel>=0.26 in /appl/python/3.7.11/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (0.36.2)
Requirement already satisfied: google-auth<3,>=1.6.3 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (2.15.0)
Requirement already satisfied: markdown>=2.6.8 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (3.4.1)
Requirement already satisfied: grpcio>=1.24.3 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (1.51.1)
Requirement already satisfied: six>=1.9.0 in /appl/python/3.7.11/lib/python3.7/site-packages (from google-auth<3,>=1.6.3->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (1.16.0)
Requirement already satisfied: rsa<5,>=3.1.4 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from google-auth<3,>=1.6.3->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (4.9)
Requirement already satisfied: pyasn1-modules>=0.2.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from google-auth<3,>=1.6.3->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (0.2.8)
Requirement already satisfied: cachetools<6.0,>=2.0.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from google-auth<3,>=1.6.3->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (5.2.0)
Requirement already satisfied: requests-oauthlib>=0.7.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from google-auth-oauthlib<0.5,>=0.4.1->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (1.3.1)
Requirement already satisfied: importlib-metadata>=4.4 in /appl/python/3.7.11/lib/python3.7/site-packages (from markdown>=2.6.8->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (4.6.3)
Requirement already satisfied: zipp>=0.5 in /appl/python/3.7.11/lib/python3.7/site-packages (from importlib-metadata>=4.4->markdown>=2.6.8->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (3.5.0)
Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from pyasn1-modules>=0.2.1->google-auth<3,>=1.6.3->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (0.4.8)
Requirement already satisfied: oauthlib>=3.0.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from requests-oauthlib>=0.7.0->google-auth-oauthlib<0.5,>=0.4.1->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (3.2.2)
Requirement already satisfied: MarkupSafe>=2.1.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from werkzeug>=1.0.1->tensorboard->-r recognition/arcface_torch/requirement.txt (line 2)) (2.1.1)
Requirement already satisfied: PyWavelets>=1.1.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (1.3.0)
Requirement already satisfied: networkx>=2.2 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (2.6.3)
Requirement already satisfied: packaging>=20.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (22.0)
Requirement already satisfied: pillow!=7.1.0,!=7.1.1,!=8.3.0,>=6.1.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (9.3.0)
Requirement already satisfied: scipy>=1.4.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (1.7.3)
Requirement already satisfied: imageio>=2.4.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (2.23.0)
Requirement already satisfied: tifffile>=2019.7.26 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from scikit-image->-r recognition/arcface_torch/requirement.txt (line 8)) (2021.11.2)
Requirement already satisfied: python-dateutil>=2.7 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from matplotlib->-r recognition/arcface_torch/requirement.txt (line 10)) (2.8.2)
Requirement already satisfied: kiwisolver>=1.0.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from matplotlib->-r recognition/arcface_torch/requirement.txt (line 10)) (1.4.4)
Requirement already satisfied: cycler>=0.10 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from matplotlib->-r recognition/arcface_torch/requirement.txt (line 10)) (0.11.0)
Requirement already satisfied: fonttools>=4.22.0 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from matplotlib->-r recognition/arcface_torch/requirement.txt (line 10)) (4.38.0)
Requirement already satisfied: pyparsing>=2.2.1 in /work3/s210521/venvs/arcface_venv/lib/python3.7/site-packages (from matplotlib->-r recognition/arcface_torch/requirement.txt (line 10)) (3.0.9)
Installing collected packages: mxnet-cu102
Successfully installed mxnet-cu102-1.7.0
RUNNING SCRIPT
yello
1
gpus [0]
hello
[32, 16, 8] {'32': {'SCALES': (32, 16), 'BASE_SIZE': 16, 'RATIOS': (1.0,), 'ALLOWED_BORDER': 9999}, '16': {'SCALES': (8, 4), 'BASE_SIZE': 16, 'RATIOS': (1.0,), 'ALLOWED_BORDER': 9999}, '8': {'SCALES': (2, 1), 'BASE_SIZE': 16, 'RATIOS': (1.0,), 'ALLOWED_BORDER': 9999}}
means [0. 0. 0.]
use_landmarks True
cascade 0
sym size: 9

------------------------------------------------------------
Sender: LSF System <lsfadmin@hpc.dtu.dk>
Subject: Job 15086899: <pipeline> in cluster <dcc> Exited

Job <pipeline> was submitted from host <gbarlogin2> by user <s210521> in cluster <dcc> at Tue Dec 20 15:05:43 2022
Job was executed on host(s) <n-62-20-2>, in queue <gpuv100>, as user <s210521> in cluster <dcc> at Tue Dec 20 15:05:44 2022
</zhome/ab/6/160488> was used as the home directory.
</zhome/ab/6/160488/github/insightface-torch-thesis> was used as the working directory.
Started at Tue Dec 20 15:05:44 2022
Terminated at Tue Dec 20 15:06:31 2022
Results reported at Tue Dec 20 15:06:31 2022

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/sh
#BSUB -q gpuv100
#BSUB -gpu "num=1"
#BSUB -J pipeline
#BSUB -n 1
#BSUB -W 24:00
#BSUB -R "rusage[mem=32GB]"
#BSUB -R "select[gpu16gb]"
#BSUB -o logs/Output_arcface%J.out

#BSUB -e logs/Error_arcface%J.err

set -o errexit
set -o nounset

#mxnet-cu115

module load ninja/1.10.1
module load gcc/4.9.1
module load python3/3.7.11
# module load cuda/11.5
# module load cudnn/v8.3.0.98-prod-cuda-11.5
module load cuda/10.2
module load cudnn/v8.0.4.30-prod-cuda-10.2  
module load cmake/3.20.1
module load nccl/2.7.3-1-cuda-10.2          

DATASET_NAME='10k_race_plot'
BASE_PATH='/work3/s210521'

echo "Running script..."
echo "Extraction features from database ........"

# # Make and activate venv
python3 -m venv /work3/s210521/venvs/arcface_venv
source /work3/s210521/venvs/arcface_venv/bin/activate

pip3 uninstall mxnet -y
pip3 uninstall mxnet-cu102 -y 
pip3 install -r recognition/arcface_torch/requirement.txt
# cd detection/retinaface/
# make 
# cd ../..
cd recognition/arcface_torch
python3 detect_recognize.py \
    --detector_path "/zhome/ab/6/160488/github/insightface-torch-thesis/recognition/arcface_torch/models/retinaface-R50/R50" \
    --recognizer_path "/zhome/ab/6/160488/github/insightface-torch-thesis/recognition/arcface_torch/models/ms1mv3_arcface_r100_fp16/backbone.pth" \
    --db_root "/work3/s210521/200_full_pipeline" \
    --folders "accepted,age_group_4,age_group_3,age_group_2,age_group_1,age_group_0" \
    --subfolders "references,probes"

(... more ...)
------------------------------------------------------------

Exited with exit code 1.

Resource usage summary:

    CPU time :                                   28.73 sec.
    Max Memory :                                 822 MB
    Average Memory :                             822.00 MB
    Total Requested Memory :                     32768.00 MB
    Delta Memory :                               31946.00 MB
    Max Swap :                                   -
    Max Processes :                              4
    Max Threads :                                5
    Run time :                                   104 sec.
    Turnaround time :                            48 sec.

The output (if any) is above this job summary.



PS:

Read file <logs/Error_arcface15086899.err> for stderr output of this job.

